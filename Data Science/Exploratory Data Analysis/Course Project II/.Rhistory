setwd("~/Documents/Learning/Data Science/Getting and Cleaning Data")
setwd("~/Documents/Learning/Data Science/Getting and Cleaning Data/Course Project")
activities <- read.csv('UCI HAR Dataset/activity_labels.txt')
View(activities)
View(activities)
activities <- read.csv('UCI HAR Dataset/activity_labels.txt', header = false);
activities <- read.csv('UCI HAR Dataset/activity_labels.txt', headers = false);
activities <- read.csv('UCI HAR Dataset/activity_labels.txt', headers == false);
activities <- read.csv('UCI HAR Dataset/activity_labels.txt', headers = FALSE);
activities <- read.csv('UCI HAR Dataset/activity_labels.txt', header = FALSE);
colnames(activites) <- c('activity_id', 'activity_name');
colnames(activities) <- c('activity_id', 'activity_name');
View(activities)
View(activities)
activities <- read.table('UCI HAR Dataset/activity_labels.txt', header = FALSE, );
colnames(activities) <- c('activity_id', 'activity_name');
subject_train <- read.table('UCI HAR Dataset/train/subject_train.txt', header=FALSE);
colnames(subject_train) <- ('subject_id');
x_train <- read.table('UCI HAR Dataset/train/x_train.text', header=FALSE);
x_train <- read.table('UCI HAR Dataset/train/x_train.tet', header=FALSE);
x_train <- read.table('UCI HAR Dataset/train/x_train.tet', header=FALSE);
x_train <- read.table('UCI HAR Dataset/train/X_train.tet', header=FALSE);
x_train <- read.table('UCI HAR Dataset/train/X_train.tet', header=FALSE);
x_train <- read.table('UCI HAR Dataset/train/X_train.txt', header=FALSE);
x_train <- read.table('UCI HAR Dataset/train/X_train.txt', header=FALSE);
y_train <- read.table('UCI HAR Dataset/train/y_train.txt', header=FALSE);
View(x_train)
View(x_train)
features <- read.table('UCI HAR Dataset/features.txt', header = FALSE);
colnames(features) <- c('feature_id', 'feature_name');
colnames(x_train) <- features$feature_name;
View(x_train)
colnames(y_train) <- 'activity_id';
training_data <- cbind(y_train, subject_train, x_train);
subject_test <- read.table('UCI HAR Dataset/test/subject_test.txt', header=FALSE);
x_test <- read.table('UCI HAR Dataset/test/X_test.txt', header=FALSE);
y_test <- read.table('UCI HAR Dataset/test/y_test.txt', header=FALSE);
colnames(subject_test) <- ('subject_id');
colnames(x_test) <- features$feature_name;
colnames(y_test) <- 'activity_id';
test_data <- cbind(y_test, subject_test, x_test);
full_data <- rbind(training_data, test_data);
full_data_cols <- colnames(full_data);
valid_cols <- (grepl("activitiy",colNames));
valid_cols <- (grepl("activitiy",full_data_cols));
valid_cols <- (grepl("activity",full_data_cols));
valid_cols <- (grepl("activity",full_data_cols) | grepl('subject', full_data_cols) | grepl('mean', full_data_cols) | grepl('std', full_data_cols));
valid_cols;
valid_cols <- (grepl("activity",full_data_cols) | grepl('subject', full_data_cols) | grepl('.mean.', full_data_cols) | grepl('.std.', full_data_cols));
valid_cols;
valid_full_data <- full_data[, valid_cols];
valid_cols <- (grepl("activity",full_data_cols) | grepl('subject', full_data_cols) | grepl('Mean', full_data_cols) | grepl('std', full_data_cols));
valid_full_data <- full_data[, valid_cols];
valid_cols <- (grepl("activity",full_data_cols) | grepl('subject', full_data_cols) | grepl('mean', full_data_cols) | grepl('Mean', full_data_cols) | grepl('std', full_data_cols));
valid_full_data <- full_data[, valid_cols];
valid_cols <- (grepl("activity",full_data_cols) | grepl('subject', full_data_cols) | grepl('-(mean|std)\\(\\)', full_data_cols)
valid_full_data <- full_data[, valid_cols];
valid_cols <- (grepl("activity",full_data_cols) | grepl('subject', full_data_cols) | grepl('-(mean|std)\\(\\)', full_data_cols);
valid_cols <- (grepl("activity",full_data_cols) | grepl('subject', full_data_cols) | grepl('-(mean|std)\\(\\)', full_data_cols));
valid_full_data <- full_data[, valid_cols];
valid_full_data <- merge(valide_ful_data, activities, by='activiti_id', all.x=TRUE);
valid_full_data <- merge(valid_ful_data, activities, by='activiti_id', all.x=TRUE);
valid_full_data <- merge(valid_full_data, activities, by='activiti_id', all.x=TRUE);
valid_full_data <- merge(valid_full_data, activities, by='activity_id', all.x=TRUE);
colnames(valid_full_data);
valid_full_data <- full_data[, valid_cols];
valid_full_data <- merge(valid_full_data, activities, by='activity_id', all.x=FALSE);
valid_full_data <- full_data[, valid_cols];
valid_full_data[,'activity_id'] <- activities[valid_full_data[,'activity_id'],'activity_name']
View(valid_full_data)
View(valid_full_data)
valid_full_data <- full_data[, valid_cols];
View(valid_full_data)
View(valid_full_data)
valid_full_data[,'activity_id'] <- activities[valid_full_data[,'activity_id'],'activity_name']
View(valid_full_data)
View(valid_full_data)
View(activities)
View(activities)
View(valid_full_data)
View(valid_full_data)
colname(valid_full_data)['activity_id'] <- 'Activity';
colnames(valid_full_data)['activity_id'] <- 'Activity';
colnames(valid_full_data)[1] <- 'Activity';
View(valid_full_data)
View(valid_full_data)
colNames <- colnames(valid_full_data);
colNames
for (i in 1:length(colNames))
{
colNames[i] = gsub("^(t)","Time ",colNames[i])
colNames[i] = gsub("^(f)","Freq ",colNames[i])
colNames[i] = gsub("Acc","Acceleration ",colNames[i])
colNames[i] = gsub("-mean","Mean",colNames[i])
colNames[i] = gsub("\\()","",colNames[i])
colNames[i] = gsub("-std$","Standard Deviation",colNames[i])
colNames[i] = gsub("([Gg]ravity)","Gravity ",colNames[i])
colNames[i] = gsub("([Bb]ody[Bb]ody|[Bb]ody)","Body ",colNames[i])
colNames[i] = gsub("[Jj]erk","Jerk  ",colNames[i])
colNames[i] = gsub("[Gg]yro","Gyro ",colNames[i])
colNames[i] = gsub("Mag","Magnitude ",colNames[i])
#   colNames[i] = gsub("([Bb]odyaccjerkmag)","BodyAccJerkMagnitude",colNames[i])
#   colNames[i] = gsub("JerkMag","JerkMagnitude",colNames[i])
#   colNames[i] = gsub("GyroMag","GyroMagnitude",colNames[i])
};
colNames
colNames <- colnames(valid_full_data);
for (i in 1:length(colNames))
{
colNames[i] = gsub("^(t)","Time ",colNames[i])
colNames[i] = gsub("^(f)","Freq ",colNames[i])
colNames[i] = gsub("Acc","Acceleration ",colNames[i])
colNames[i] = gsub("-mean","Mean",colNames[i])
colNames[i] = gsub("\\()","",colNames[i])
colNames[i] = gsub("-std$","Standard Deviation",colNames[i])
colNames[i] = gsub("([Gg]ravity)","Gravity ",colNames[i])
colNames[i] = gsub("([Bb]ody[Bb]ody|[Bb]ody)","Body ",colNames[i])
colNames[i] = gsub("[Jj]erk","Jerk ",colNames[i])
colNames[i] = gsub("[Gg]yro","Gyro ",colNames[i])
colNames[i] = gsub("Mag","Magnitude ",colNames[i])
};
colNames
colNames <- colnames(valid_full_data);
for (i in 1:length(colNames))
{
colNames[i] = gsub("^(t)","Time ",colNames[i])
colNames[i] = gsub("^(f)","Freq ",colNames[i])
colNames[i] = gsub("Acc","Acceleration ",colNames[i])
colNames[i] = gsub("-mean","Mean",colNames[i])
colNames[i] = gsub("\\()","",colNames[i])
colNames[i] = gsub("-std","Standard Deviation",colNames[i])
colNames[i] = gsub("([Gg]ravity)","Gravity ",colNames[i])
colNames[i] = gsub("([Bb]ody[Bb]ody|[Bb]ody)","Body ",colNames[i])
colNames[i] = gsub("[Jj]erk","Jerk ",colNames[i])
colNames[i] = gsub("[Gg]yro","Gyro ",colNames[i])
colNames[i] = gsub("Mag","Magnitude ",colNames[i])
};
colNames
View(valid_full_data)
View(valid_full_data)
View(full_data)
View(full_data)
avg_data_set <- ddply(valid_full_data,
avg_data_set <- ddply(valid_full_data,
.(Activity, subject_id),
function(x) colMeans(x[, colnames(valid_full_data != c("Activity","subject_id"))])
);
avg_data_set <- ddply(valid_full_data,
.(Activity, subject_id),
function(x) colMeans(x[, 3:68])
);
library(plyr);
package(plyr);
install.packages('plyr');
library(plyr);
avg_data_set <- ddply(valid_full_data,
.(Activity, subject_id),
function(x) colMeans(x[, 3:68])
);
View(avg_data_set)
write.table(avg_data_set, 'avg_data', row.name=FALSE);
write.table(avg_data_set, 'avg_data.txt', row.name=FALSE);
x_test <- read.table('UCI HAR Dataset/test/X_test.txt', header=FALSE, colClasses="numeric");
x_test <- read.table('UCI HAR Dataset/test/X_test.txt', header=FALSE);
, colClasses="numeric"
x_test <- read.table('UCI HAR Dataset/test/X_test.txt', header=FALSE, colClasses="numeric");
x_train <- read.table('UCI HAR Dataset/train/X_train.txt', header=FALSE);
x_train <- read.table('UCI HAR Dataset/train/X_train.txt', header=FALSE, colClasses="numeric");
y_train <- read.table('UCI HAR Dataset/train/y_train.txt', header=FALSE);
y_train <- read.table('UCI HAR Dataset/train/y_train.txt', header=FALSE, colClasses='integer');
setwd("~/Documents/Learning/Data Science/Exploratory Data Analysis/Course Project II")
NEI <- readRDS("exdata-data-NEI_data/summarySCC_PM25.rds")
SCC <- readRDS("exdata-data-NEI_data/Source_Classification_Code.rds")
data<-transform(NEI,year=factor(year))
View(data)
View(data)
plotdata<-ddply(data,.(year),summarize,sum=sum(Emissions))
png("plot1.png")
plot(plotdata$year,plotdata$sum,type="n",xlab="year",ylab="total PM2.5 Emission",boxwex=0.05)
lines(plotdata$year,plotdata$sum)
dev.off()
plotdata<-ddply(data,.(year),summarize,total=sum(Emissions))# sum the emissions
png("plot1.png")
plot(plotdata$year,plotdata$total,type="n",xlab="Year",ylab="Total Emission of PM2.5")
lines(plotdata$year,plotdata$total)
dev.off()
png("plot1.png")
plot(plotdata$year,plotdata$total,type="n",xlab="Year",ylab="Total Emission of PM2.5",boxwex=0)
lines(plotdata$year,plotdata$total)
dev.off()
png("plot1.png")
plot(plotdata$year,plotdata$total,type="n",xlab="Year",ylab="Total Emission of PM2.5",boxwex=0.05)
lines(plotdata$year,plotdata$total)
dev.off()
png("plot1.png")
plot(plotdata$year,plotdata$total,type="n",xlab="Year",ylab="Total Emission of PM2.5",boxwex=0.02)
lines(plotdata$year,plotdata$total)
dev.off()
data<-transform(NEI,year=factor(year))# change year to factor
data<-data[data$fips=="24510",]
#summed Data
data<-ddply(data,.(year),summarize,total=sum(Emissions))# sum the emissions
#now plot it
png("plot2.png")
plot(data$year,data$total,type="n", xlab="Year", ylab="Total Emission of PM2.5",boxwex=0.03)
lines(data$year,data$total)
dev.off()
data<-transform(NEI,year=factor(year))# change year to factor
data<-data[data$fips=="24510",]
#summed Data
data<-ddply(data,.(year),summarize,total=sum(Emissions))# sum the emissions
#now plot it
data<-ddply(data,.(year,type),summarize,sum=sum(Emissions))
png("plot3.png")
gplot<-ggplot(data,aes(year,sum))
gplot+geom_point()+facet_grid(.~type)+labs(title="Baltimore city PM2.5 Emission",
y="total PM2.5 emission each year")
dev.off()
data<-transform(NEI,year=factor(year))# change year to factor
data<-data[data$fips=="24510",]
#summed Data
data<-ddply(data,.(year),summarize,total=sum(Emissions))# sum the emissions
#now plot it
data<-ddply(data,.(year,type),summarize,sum=sum(Emissions))
png("plot3.png")
gplot<-ggplot(data,aes(year,sum))
gplot+geom_point()+facet_grid(.~type)+labs(title="Baltimore city PM2.5 Emission",
y="total PM2.5 emission each year")
dev.off()
data<-transform(NEI,year=factor(year))# change year to factor
data<-data[data$fips=="24510",]
#summed Data
data<-ddply(data,.(year),summarize,total=sum(Emissions))# sum the emissions
#now plot it
data<-ddply(data,.(year,type),summarize,sum=sum(Emissions))
png("plot3.png")
gplot<-ggplot(data,aes(year,sum))
gplot+geom_point()+facet_grid(.~type)+labs(title="Baltimore city PM2.5 Emission",
y="total PM2.5 emission each year")
dev.off()
#summed Data
data<-ddply(data,.(year,type),summarize,total=sum(Emissions))
#now plot it
png("plot3.png")
gplot<-ggplot(data,aes(year,total))
gplot+geom_point()+facet_grid(.~type)+labs(title="Baltimore city PM2.5 Emission",
y="total PM2.5 emission each year")
dev.off()
data<-transform(NEI,year=factor(year))# change year to factor
data<-data[data$fips=="24510",]
#summed Data
data<-ddply(data,.(year,type),summarize,total=sum(Emissions))
#now plot it
png("plot3.png")
gplot<-ggplot(data,aes(year,total))
gplot+geom_point()+facet_grid(.~type)+labs(title="Baltimore city PM2.5 Emission",
y="total PM2.5 emission each year")
dev.off()
library("ggplot2")
install.packages('ggplot2')
#now plot it
png("plot3.png")
gplot<-ggplot(data,aes(year,total))
gplot+geom_point()+facet_grid(.~type)+labs(title="Baltimore city PM2.5 Emission",
y="total PM2.5 emission each year")
dev.off()
library("ggplot2")
#now plot it
png("plot3.png")
gplot<-ggplot(data,aes(year,total))
gplot+geom_point()+facet_grid(.~type)+labs(title="Baltimore city PM2.5 Emission",
y="total PM2.5 emission each year")
dev.off()
data<-transform(NEI,year=factor(year))# change year to factor
data<-data[data$fips=="24510",]
#summed Data based on year and Type
data<-ddply(data,.(year,type),summarize,total=sum(Emissions))
View(data)
data<-transform(NEI,year=factor(year))# change year to factor
data<-data[data$fips=="24510",]
#summed Data based on year and Type
data<-ddply(data,.(year,type),total=sum(Emissions))
View(data)
View(data)
data<-transform(NEI,year=factor(year))# change year to factor
data<-data[data$fips=="24510",]
#summed Data based on year and Type
data<-ddply(data,.(year,type),summarize,total=sum(Emissions))
View(data)
View(SCC)
View(SCC)
combcoal<-as.data.frame(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=T) &
grep("coal",SCC$SCC.Level.Three,ignore.case=T),1])
grep("coal",SCC$SCC.Level.Three,ignore.case=T),1])
grep("coal",SCC$SCC.Level.Three,ignore.case=T),1]
mbcoal<-SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
combcoal<-SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1]
combcoal<-SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
combcoal<-SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
combcoal<-SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1]
View(combcoal)
View(combcoal)
names(combcoal)<-"SCC"
data<-merge(combcoal,data,by="SCC")
#Plot Data
data<-ddply(data,.(year),summarize,sum=sum(Emissions))
names(combcoal)<-"SCC"
data<-merge(combcoal,data,by="SCC")
data<-transform(NEI,type=factor(type),year=factor(year));
#get the SCC of level is combustion and type of coal but ignote case
combcoal<-SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1]
names(combcoal)<-"SCC"
data<-merge(combcoal,data,by="SCC")
combcoal<-as.data.frame(SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
names(combcoal)<-"SCC"
data<-merge(combcoal,data,by="SCC")
data<-transform(NEI,type=factor(type),year=factor(year));
#get the SCC of level is combustion and type of coal but ignote case
combcoal<-as.data.frame(SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
names(combcoal)<-"SCC"
data<-merge(combcoal,data,by="SCC")
names(combcoal)<-"SCC"
View(SCC)
data<-data[SCC = combcoal, ];
data<-data[SCC == combcoal, ];
combcoal<-as.data.frame(SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
data<-transform(NEI,type=factor(type),year=factor(year));
combcoal<-as.data.frame(SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
View(combcoal)
View(combcoal)
colnames(combcoal)<-"SCC"
data<-data[SCC == combcoal, ];
data<-transform(NEI,type=factor(type),year=factor(year), SCC=factor(SCC));
combcoal<-as.data.frame(SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
colnames(combcoal)<-"SCC"; # set the col name
data<-data[SCC == combcoal, ];
combcoal<-SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1]
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
combcoal<-as.data.frame(SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
View(combcoal)
colnames(combcoal)<-"SCC"; # set the col name
data <- data[SCC == combcoal, ];
combcoal<-as.data.frame(SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
View(combcoal)
View(SCC)
data<-transform(NEI,type=factor(type),year=factor(year));
combcoal<-as.data.frame(SCC[grep("combustion", SCC$SCC.Level.One, ignore.case=T) &
grep("coal", SCC$SCC.Level.Three, ignore.case=T), 1])
combcoal<-as.data.frame(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=T) &
grep("coal",SCC$SCC.Level.Three,ignore.case=T),1])
data<-transform(NEI,type=factor(type),year=factor(year));
#get the SCC of level is combustion and type of coal but ignore case
combcoal<-as.data.frame(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=T) &
grep("coal",SCC$SCC.Level.Three,ignore.case=T),1])
View(SCC)
combustionCoal <- SCC[grep('comb', SCC$Short.Name, ignore.case=TRUE) & rep("coal",SCC$Short.Name,ignore.case=T), 1]
combustionCoal <- SCC[grep('comb', SCC$Short.Name, ignore.case=TRUE) & grep("coal", SCC$Short.Name, ignore.case=T), 1]
combustionCoal <- SCC[grep('comb', SCC$Short.Name, ignore.case=TRUE) && grep("coal", SCC$Short.Name, ignore.case=T)]
combustionCoal <- SCC[grep('comb', SCC$Short.Name, ignore.case=TRUE) && grep("coal", SCC$Short.Name, ignore.case=T)]
combustionCoal <- SCC[grep('comb', SCC$Short.Name, ignore.case=TRUE) && grep("coal", SCC$Short.Name, ignore.case=T)]
data<-transform(NEI,type=factor(type),year=factor(year));
SCC <- readRDS("exdata-data-NEI_data/Source_Classification_Code.rds")
SCC <- readRDS("exdata-data-NEI_data/Source_Classification_Code.rds")
combustionCoal <- SCC[grep('comb', SCC$Short.Name, ignore.case=TRUE) && grep("coal", SCC$Short.Name, ignore.case=T)]
combustionCoal <- SCC[(grepl('comb', SCC$Short.Name, ignore.case=T) && grepl("coal", SCC$Short.Name, ignore.case=T))]
combcoal<-as.data.frame(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=T) &
combcoal<-as.data.frame(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=T) &
grep("coal",SCC$SCC.Level.Three,ignore.case=T),1])
